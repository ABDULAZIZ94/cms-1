{% if show_date %}
    {% set col1 = "<td class=\"datetime\">%s</td>" % format_datetime(t.timestamp, timezone) %}
{% else %}
    {% set col1 = "<td class=\"time\">%s</td>" % format_time(t.timestamp, timezone) %}
{% end %}
{% if not t.compiled() %}
<tr data-submission="{{ t_idx }}" data-status="1">
    {% raw col1 %}
    <td class="status">
        Compiling...
    </td>
{% elif t.compilation_outcome == "fail" %}
<tr data-submission="{{ t_idx }}" data-status="2">
    {% raw col1 %}
    <td class="status">
        Compilation failed
        <a class="details">details</a>
    </td>
{% elif not t.evaluated() %}
<tr data-submission="{{ t_idx }}" data-status="3">
    {% raw col1 %}
    <td class="status">
        Executing...
    </td>
{% else %}
<tr data-submission="{{ t_idx }}" data-status="4">
    {% raw col1 %}
    <td class="status">
        Executed
        <a class="details">details</a>
    </td>
{% end %}
    <td class="input">
        <a class="btn" href="{{ url_root }}/tasks/{{ quote(task.name, safe='') }}/tests/{{ t_idx }}/input">
            {{ _("Download") }}
        </a>
    </td>
    <td class="output">
        <a class="btn btn-primary{% if not t.evaluated() %} disabled{% end %}" href="{{ url_root }}/tasks/{{ quote(task.name, safe='') }}/tests/{{ t_idx }}/output">
            {{ _("Download") }}
        </a>
    </td>
    <td class="files">
        {% comment We replace '%l' with the actual language only when it occurs as an extension at the end of the string and only when %}
        {% comment there isn't another file with that name. This allows to securily reverse the replacement and should work great in %}
        {% comment the common case. Yet, it still allows the marginal case of both 'foo.%l' and 'foo.c' in the submission format. %}
        {% if len(t.files) == 0 %}
        <a class="btn disabled">
            {{ _("None") }}
        </a>
        {% elif len(t.files) == 1 %}
            {% set filename = t.files.keys()[0] %}
        <a class="btn" href="{{ url_root }}/tasks/{{ quote(task.name, safe='') }}/tests/{{ t_idx }}/files/{{ quote(filename, safe='') }}">
            {{ _("Download") }}
        </a>
        {% else %}
        <div class="btn-group">
            <a class="btn dropdown-toggle" data-toggle="dropdown">
                {{ _("Download") }}
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
            {% for filename in t.files %}
                <li>
                    <a href="{{ url_root }}/tasks/{{ quote(task.name, safe='') }}/tests/{{ t_idx }}/files/{{ quote(filename, safe='') }}">
                        {{ filename }}
                    </a>
                </li>
            {% end %}
            </ul>
        </div>
        {% end %}
    </td>
</tr>
