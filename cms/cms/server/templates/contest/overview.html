{% extends base.html %}
{% block core %}

{% if current_user is not None %}

<h1>{{ _("Contest overview") }}</h1>

<h2 id="title_announcements" class="toggling_on">{{ _("Announcements") }}</h2>
<div id="announcements">
  {% if contest.announcements != [] %}
  <div class="notifications">
    {% for msg in contest.announcements %}
    <div class="notification communication">
      <div class="notification_msg">
        <div class="notification_timestamp">{{ Utils.format_time_or_date(msg.timestamp) }}</div>
        <div class="notification_subject">{{ msg.subject }}</div>
        <div class="notification_text">{{ msg.text }}</div>
      </div>
    </div>
    {% end %}
  </div>

  {% else %}
  {{ _("No announcements.") }}

  {% end %}
  <div class="hr"></div>
</div>

<h2 id="title_general_information" class="toggling_on">{{ _("General information") }}</h2>
<div id="general_information">

  {% if phase == 0 %}
  <p>{{ _("The contest started at %(start_time)s and will end at %(stop_time)s.") % {"start_time": Utils.format_time_or_date(contest.start), "stop_time": Utils.format_time_or_date(valid_phase_end)} }}</p>

  {% elif phase == -1 %}
  <p>{{ _("The contest will start at %(start_time)s and will end at %(stop_time)s.") % {"start_time": Utils.format_time_or_date(contest.start), "stop_time": Utils.format_time_or_date(contest.stop)} }}</p>

  {% elif phase == 1 %}
  <p>{{ _("The contest has ended.") }}</p>
  {% end %}
</div>

{% else %}
<h1>{{ _("Authentication required") }}</h1>
{{ _("Please login to continue.") }}

{% end %}

{% end %}
